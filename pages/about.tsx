import { ConnectButton, useConnectModal } from '@rainbow-me/rainbowkit';
import Head from 'next/head';
import DConnect from '../components/DConnect';
import DConnect2 from '../components/DConnect2';
import styles from '../styles/Home.module.css';
import { useAccount, useBalance, useDisconnect, useEnsName, useNetwork, useSigner, useSwitchNetwork } from 'wagmi'
import useMounted from '../hook/useMounted';
import { fetchBalance } from '@wagmi/core'
import { ReactElement, useEffect } from 'react';
import Layout from '../components/Layout';
const About = () => {
    const { data: signer } = useSigner();
    const isMounted = useMounted()
    const { disconnect } = useDisconnect()
    const { openConnectModal } = useConnectModal()
    const { address: account, connector: activeConnector, isConnecting, isDisconnected } = useAccount()
    console.log("ğŸš€ ~ file: index.tsx:17 ~ isDisconnected:", isDisconnected)
    console.log("ğŸš€ ~ file: index.tsx:17 ~ isConnecting:", isConnecting)
    const ensName = useEnsName({
        address: account,
        chainId: 1,
    })
    const { chain } = useNetwork()
    const { switchNetwork } = useSwitchNetwork()
    const { data, isError, isLoading } = useBalance({
        address: account,
    })
    useEffect(() => {
        const getBalance = async () => {
            if (account) {
                const balance = await fetchBalance({ address: account })
                console.log(balance);
            }
        }
        getBalance()
    }, [])
    const changeChain = () => {
        switchNetwork?.(137)
    }
    return (
        <div className={styles.container}>
            <Head>
                <title>RainbowKit App</title>
                <meta
                    name="description"
                    content="Generated by @rainbow-me/create-rainbowkit"
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            {/* <DConnect isShow={true} /> */}
            {isMounted && <DConnect2 />}
            <button onClick={() => disconnect()}>æ³¨é”€</button>
            <span onClick={openConnectModal}>é“¾æ¥</span>
            {isMounted && <div>å½“å‰ç”¨æˆ·çš„ENS:{ensName.data}</div>}
            {isMounted && <div>å½“å‰é“¾Id:{chain?.id}</div>}
            <button onClick={changeChain}>åˆ‡æ¢é“¾</button>
            {isMounted && <div>å½“å‰ç”¨æˆ·ä½™é¢ï¼š{data?.formatted}{data?.symbol}</div>}
            <div style={{ color: 'green' }}>chainStatus="full"</div>
            <br />
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="full" />
            <br />
            <br />
            <div style={{ color: 'green' }}>chainStatus="icon"</div>
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="icon" />
            <br />
            <br />
            <div style={{ color: 'green' }}>chainStatus="name"</div>
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="name" />
            <br />
            <br />
            <div style={{ color: 'green' }}>chainStatus="none"</div>
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="none" />
            <br />
            <br />
            <div style={{ color: 'green' }}>showBalance="none"</div>
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="none" showBalance={false} />
            <br />
            <br />
            <div style={{ color: 'green' }}>accountStatus="address"</div>
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="none" showBalance={false} accountStatus={"address"} />
            <br />
            <br />
            <div style={{ color: 'green' }}>accountStatus="avatar"</div>
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="none" showBalance={false} accountStatus={"avatar"} />
            <br />
            <br />
            <div style={{ color: 'green' }}>accountStatus="full"</div>
            <br />
            <ConnectButton label='æˆ‘æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—' chainStatus="none" showBalance={false} accountStatus={"full"} />
            <br />
            <br />
            <DConnect isShow={true} />
            <br />
            <br />
        </div>
    );
};
About.getLayout = function getLayout(page: ReactElement) {
    return (
        <Layout>
            <>{page}</>
        </Layout>
    )
}
export default About;
